{% extends "layouts/base.html" %}

{% block title %} Machine Learning {% endblock %}

{% block stylesheets %}
<Script>
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#print')
                    .attr('src', e.target.result)
                    .width(150)
                    .height(150);
            };
            reader.readAsDataURL(input.files[0]);
        }
    }
</Script>
{% endblock stylesheets %}

{% block content %}
<main>
    <div class="section-header bg-primary text-white">
        <div class="container">
            <div class="row justify-content-center">
                <h3 class="text-center">Car Damage Estimation</h3>
            </div>
        </div>
    </div>
    <br /><br /><br />
    <!-- Form -->
    <!-- <form action="{{ url_for('predict')}}" method="POST" enctype="multipart/form-data"> -->
    <!-- Section -->
    <div class="section section-md pt-4">
        <div class="container">
            <!-- Form -->
            <!-- <form action="/index.html" method="POST" enctype="multipart/form-data"> -->
            <form action="{{ url_for('predict')}}" method="POST" enctype="multipart/form-data">
                <div class="row mb-4 mb-lg-5 justify-content-center">
                    <!-- <div class="col-lg-4 col-sm-6 text-center">
                        <label for="formFile" class="form-label">Upload Full Vehicle image<br /><br />
                            <input class="form-control" type="file" name="file1" id="formFile1" /><br />
                    </div> -->
                    <div class="col-lg-4 col-sm-6 text-center">
                        <label for="formFile" class="form-label">Upload damage image<br /><br />
                            <!-- <input class="form-control" type="file" name="file" id="formFile" onchange="readURL(this);"/><br /> -->
                            <input class="form-control" type="file" name="file" id="formFile" /><br />
                    </div>
                </div>
                <div class="row mb-4 mb-lg-5 justify-content-center">
                    <div class="col-lg-4 col-sm-6 text-center">
                        <button class="btn btn-lg btn-primary" type="submit">Estimate</button><br /><br />
                        <div class="row mb-4 mb-lg-5 justify-content-center">
                                <div class="col-lg-12 col-sm-12 text-center">
                                    <!-- <img id="print" src="#" /> -->
                                    <img id="print" src="/static/assets/uploads/uploaded.jpeg" onerror="this.style.display='none'" />
                                </div>
                            </div>
                    </div>
                </div>
                <div class="row mb-4 mb-lg-5 justify-content-center">
                    <div class="col-lg-12 col-sm-12 text-center">
                        <label class="form-label">{{car_result}}</label><br />
                        <label class="form-label">{{damage_result}}</label><br />
                        <label class="form-label">{{severity_result}}</label><br />
                        <label class="form-label">{{repair_price}}</label><br />
                    </div>
                </div>

            </form>
            <!-- End of Form -->
        </div>
    </div>
    <!-- End of Section -->
    <!-- </form> -->
    <!-- End of Form -->
</main>

{% include 'includes/footer.html' %}

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}{% endblock javascripts %}